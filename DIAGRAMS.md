# ğŸ“Š Microservices System Diagram

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                         CLIENT LAYER                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Browser  â”‚  â”‚  Mobile  â”‚  â”‚   CLI    â”‚  â”‚  Postman â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/REST (JSON)
                         â”‚ Port 3000
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                      API GATEWAY LAYER                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           API Gateway (Node.js + Express)                 â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Responsibilities:                                        â”‚ â”‚
â”‚  â”‚  â€¢ HTTP â†’ gRPC conversion                                â”‚ â”‚
â”‚  â”‚  â€¢ Request routing                                       â”‚ â”‚
â”‚  â”‚  â€¢ Response aggregation                                  â”‚ â”‚
â”‚  â”‚  â€¢ (Future: Auth, Rate limiting, Caching)               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                  â”‚
         â”‚ gRPC             â”‚ gRPC             â”‚ gRPC
         â”‚ (Protobuf)       â”‚ (Protobuf)       â”‚ (Protobuf)
         â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚          â”‚       â”‚          â”‚      â”‚          â”‚
    â”‚   USER   â”‚       â”‚ PRODUCT  â”‚      â”‚  ORDER   â”‚
    â”‚ SERVICE  â”‚       â”‚ SERVICE  â”‚      â”‚ SERVICE  â”‚
    â”‚          â”‚       â”‚          â”‚      â”‚          â”‚
    â”‚ (Golang) â”‚       â”‚ (NestJS) â”‚      â”‚ (Node.js)â”‚
    â”‚          â”‚       â”‚          â”‚      â”‚          â”‚
    â”‚ Port:    â”‚       â”‚ Port:    â”‚      â”‚ Port:    â”‚
    â”‚ 50051    â”‚       â”‚ 50052    â”‚      â”‚ 50053    â”‚
    â”‚          â”‚       â”‚          â”‚      â”‚          â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ User â”‚ â”‚       â”‚ â”‚Productâ”‚       â”‚ â”‚Order â”‚ â”‚
    â”‚ â”‚ Data â”‚ â”‚       â”‚ â”‚ Data â”‚ â”‚      â”‚ â”‚ Data â”‚ â”‚
    â”‚ â”‚(Map) â”‚ â”‚       â”‚ â”‚(Map) â”‚ â”‚      â”‚ â”‚(Map) â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚          â”‚       â”‚          â”‚      â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                                           â”‚
                        â”‚ gRPC Client Calls                         â”‚
                        â”‚                                           â”‚
                        â–¼                                           â–¼
                   User Service                              Product Service
                   (Get user info)                           (Get product info)
```

## ğŸ”„ Request Flow - Create Order Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. POST /api/orders
     â”‚    { userId: "1", productId: "1", quantity: 2 }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway    â”‚
â”‚  (Port 3000)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. gRPC: CreateOrder(userId, productId, quantity)
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Order Service   â”‚
â”‚  (Port 50053)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                             â”‚
     â”‚ 3a. gRPC: GetUser(id="1")                  â”‚ 3b. gRPC: GetProduct(id="1")
     â”‚                                             â”‚
     â–¼                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Service   â”‚                         â”‚ Product Service â”‚
â”‚  (Port 50051)   â”‚                         â”‚  (Port 50052)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                             â”‚
     â”‚ 4a. Return:                                â”‚ 4b. Return:
     â”‚ { id:"1", name:"John",                     â”‚ { id:"1", name:"Laptop",
     â”‚   email:"john@example.com" }               â”‚   price: 1000 }
     â”‚                                             â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Order Service   â”‚
                â”‚                 â”‚
                â”‚ 5. Calculate:   â”‚
                â”‚ totalPrice =    â”‚
                â”‚ 1000 * 2 = 2000 â”‚
                â”‚                 â”‚
                â”‚ 6. Create Order:â”‚
                â”‚ {               â”‚
                â”‚   id: "1",      â”‚
                â”‚   userId: "1",  â”‚
                â”‚   productId:"1",â”‚
                â”‚   quantity: 2,  â”‚
                â”‚   totalPrice:   â”‚
                â”‚     2000,       â”‚
                â”‚   userName:     â”‚
                â”‚     "John",     â”‚
                â”‚   productName:  â”‚
                â”‚     "Laptop"    â”‚
                â”‚ }               â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ 7. Return Order via gRPC
                     â”‚
                     â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  API Gateway    â”‚
                â”‚                 â”‚
                â”‚ 8. Convert      â”‚
                â”‚ gRPC â†’ JSON     â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ 9. HTTP Response (JSON)
                     â”‚
                     â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Client  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ Network Communication

### Local Development

```
localhost:3000     â†’ API Gateway (HTTP)
localhost:50051    â†’ User Service (gRPC)
localhost:50052    â†’ Product Service (gRPC)
localhost:50053    â†’ Order Service (gRPC)
```

### Docker Network

```
api-gateway:3000        â†’ API Gateway (HTTP)
user-service:50051      â†’ User Service (gRPC)
product-service:50052   â†’ Product Service (gRPC)
order-service:50053     â†’ Order Service (gRPC)
```

## ğŸ“¡ Protocol Comparison

### REST (API Gateway â†” Client)

```
Pros:
âœ… Human-readable (JSON)
âœ… Browser-friendly
âœ… Widely supported
âœ… Easy debugging

Cons:
âŒ Larger payload size
âŒ Slower serialization
âŒ No schema enforcement
```

### gRPC (Services â†” Services)

```
Pros:
âœ… Binary protocol (faster)
âœ… Smaller payload (3-10x)
âœ… Type-safe (Protobuf)
âœ… Auto-generated code
âœ… Bi-directional streaming

Cons:
âŒ Not browser-friendly
âŒ Harder to debug
âŒ Requires code generation
```

## ğŸ”§ Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway                          â”‚
â”‚  â€¢ Node.js 18+                                          â”‚
â”‚  â€¢ Express (HTTP server)                                â”‚
â”‚  â€¢ @grpc/grpc-js (gRPC client)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   User Service                          â”‚
â”‚  â€¢ Go 1.21+                                             â”‚
â”‚  â€¢ google.golang.org/grpc                               â”‚
â”‚  â€¢ Protocol Buffers                                     â”‚
â”‚  â€¢ In-memory Map storage                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Product Service                        â”‚
â”‚  â€¢ NestJS 10+                                           â”‚
â”‚  â€¢ TypeScript                                           â”‚
â”‚  â€¢ @nestjs/microservices                                â”‚
â”‚  â€¢ In-memory Map storage                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Order Service                         â”‚
â”‚  â€¢ Node.js 18+                                          â”‚
â”‚  â€¢ @grpc/grpc-js (server + client)                      â”‚
â”‚  â€¢ In-memory Map storage                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Data Flow

### User Creation

```
Client â†’ API Gateway â†’ User Service â†’ Store in Map â†’ Return User
```

### Product Creation

```
Client â†’ API Gateway â†’ Product Service â†’ Store in Map â†’ Return Product
```

### Order Creation (Complex)

```
Client â†’ API Gateway â†’ Order Service
                          â†“
                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â†“           â†“
              User Service  Product Service
                    â†“           â†“
              Get User     Get Product
                    â†“           â†“
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                          â†“
                  Calculate Total
                          â†“
                    Store Order
                          â†“
                   Return Order
```

## ğŸ¯ Key Concepts Demonstrated

1. **Microservices Architecture**

   - Äá»™c láº­p deployment
   - Äá»™c láº­p scaling
   - Äá»™c láº­p technology stack

2. **API Gateway Pattern**

   - Single entry point
   - Protocol translation
   - Request routing

3. **gRPC Communication**

   - Binary protocol
   - Type-safe
   - High performance

4. **Service Orchestration**

   - Order Service orchestrates User + Product
   - Aggregates data from multiple services

5. **Polyglot Persistence**

   - Each service owns its data
   - No shared database

6. **Language Diversity**
   - Golang for performance
   - NestJS for enterprise features
   - Node.js for simplicity
